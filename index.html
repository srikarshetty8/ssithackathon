<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Track and reduce your carbon footprint with AI-powered insights">
    <title>Carbon Footprint Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="logo">üå±</span>
                <span class="brand-text">Carbon Tracker</span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="#hero" class="nav-link">Home</a></li>
                <li><a href="#calculator" class="nav-link">Calculator</a></li>
                <li><a href="#dashboard" class="nav-link">Dashboard</a></li>
                <li><a href="#history" class="nav-link">History</a></li>
                <li><a href="#" id="chatLink" class="nav-link">Chat</a></li>
                <li><a href="#insights" class="nav-link">Insights</a></li>
                <li><a href="#goals" class="nav-link">Tasks</a></li>
                <!-- <li><a href="#premium" class="nav-link">Premium</a></li> -->
                <li><a href="#profile" class="nav-link">Profile</a></li>
               
            </ul>
            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                    <span class="theme-icon">üåô</span>
                </button>
                <button class="btn-secondary" id="loginBtn">Login</button>
                <button class="btn-primary" id="signupBtn">Sign Up</button>
            </div>
            <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">Track Your Carbon Footprint</h1>
                <p class="hero-subtitle">Measure, understand, and reduce your environmental impact with AI-powered insights</p>
                <div class="hero-cta">
                    <button class="btn-primary btn-large" onclick="scrollToSection('calculator')">
                        Calculate My Footprint
                    </button>
                    <button class="btn-secondary btn-large" onclick="scrollToSection('dashboard')">
                        View Dashboard
                    </button>
                </div>
                <div class="hero-stats">
                    <div class="stat-card">
                        <div class="stat-number">50K+</div>
                        <div class="stat-label">Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">2.5M</div>
                        <div class="stat-label">CO‚ÇÇe Reduced</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">125K</div>
                        <div class="stat-label">Trees Equivalent</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section id="calculator" class="calculator-section">
        <div class="container">
            <h2 class="section-title">Carbon Footprint Calculator</h2>
            <p class="section-subtitle">Enter your activities to calculate your carbon emissions</p>
            
            <div class="calculator-tabs">
                <button class="calc-tab active" data-category="transport">üöó Transport</button>
                <button class="calc-tab" data-category="energy">‚ö° Energy</button>
                <button class="calc-tab" data-category="food">üçΩÔ∏è Food</button>
                <button class="calc-tab" data-category="waste">üóëÔ∏è Waste</button>
                <button class="calc-tab" data-category="shopping">üõí Shopping</button>
            </div>

            <div class="calculator-content">
                <!-- Transport -->
                <div class="calc-panel active" id="transport-panel">
                    <div class="input-group">
                        <label for="car-miles">Car Miles (miles/day)</label>
                        <input type="number" id="car-miles" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="flights">Flights (short-haul per day)</label>
                        <input type="number" id="flights" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="public-transport">Public Transport (miles/day)</label>
                        <input type="number" id="public-transport" class="input-field" placeholder="0" min="0">
                    </div>
                </div>

                <!-- Energy -->
                <div class="calc-panel" id="energy-panel">
                    <div class="input-group">
                        <label for="electricity">Electricity Usage (kWh/day)</label>
                        <input type="number" id="electricity" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="gas">Natural Gas (therms/day)</label>
                        <input type="number" id="gas" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="renewable-percent">Renewable Energy (%)</label>
                        <input type="number" id="renewable-percent" class="input-field" placeholder="0" min="0" max="100">
                    </div>
                </div>

                <!-- Food -->
                <div class="calc-panel" id="food-panel">
                    <div class="input-group">
                        <label for="meat-meals">Meat Meals per Day</label>
                        <input type="number" id="meat-meals" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="dairy-products">Dairy Products (servings/day)</label>
                        <input type="number" id="dairy-products" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="local-food">Local/Organic Food (%)</label>
                        <input type="number" id="local-food" class="input-field" placeholder="0" min="0" max="100">
                    </div>
                </div>

                <!-- Waste -->
                <div class="calc-panel" id="waste-panel">
                    <div class="input-group">
                        <label for="waste-bags">Waste Bags per Day</label>
                        <input type="number" id="waste-bags" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="recycling-percent">Recycling Rate (%)</label>
                        <input type="number" id="recycling-percent" class="input-field" placeholder="0" min="0" max="100">
                    </div>
                </div>

                <!-- Shopping -->
                <div class="calc-panel" id="shopping-panel">
                    <div class="input-group">
                        <label for="shopping-spend">Daily Shopping ($)</label>
                        <input type="number" id="shopping-spend" class="input-field" placeholder="0" min="0">
                    </div>
                    <div class="input-group">
                        <label for="electronics">Electronics Purchases (per day)</label>
                        <input type="number" id="electronics" class="input-field" placeholder="0" min="0">
                    </div>
                </div>
            </div>

            <button class="btn-primary btn-large btn-center" id="calculateBtn">
                <span id="calculateBtnText">Calculate Footprint</span>
                <span id="calculateBtnLoading" style="display: none;">Calculating...</span>
            </button>
            
            <div class="calculation-result" id="calculationResult" style="display: none;">
                <div class="result-card">
                    <h3>Your Carbon Footprint</h3>
                    <div class="result-value" id="resultValue">0.00</div>
                    <div class="result-unit">tCO‚ÇÇe/day</div>
                    <div class="result-description" id="resultDescription" style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                        Based on your inputs across all categories
                    </div>
                    <button class="btn-secondary" id="saveCalculationBtn" style="margin-top: 1.5rem;">Save to Dashboard</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Dashboard Section -->
    <section id="dashboard" class="dashboard-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Your Dashboard</h2>
                <div class="section-actions">
                    <button class="btn-secondary" id="exportBtn">Export Report</button>
                    <span class="premium-badge" id="exportBadge">Premium</span>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- KPI Cards -->
                <div class="kpi-card">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="monthlyCo2">0.0</div>
                        <div class="kpi-label">Daily CO‚ÇÇe</div>
                        <div class="kpi-change positive" id="weeklyChange">+0%</div>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon">üå≥</div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="treesEquivalent">0</div>
                        <div class="kpi-label">Trees Equivalent</div>
                        <div class="kpi-subtext">To offset emissions</div>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon">üìà</div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="reductionPercent">0%</div>
                        <div class="kpi-label">Change vs Yesterday</div>
                        <div class="kpi-subtext">Keep it up!</div>
                    </div>
                </div>

                <div class="kpi-card">
                    <div class="kpi-icon">üéØ</div>
                    <div class="kpi-content">
                        <div class="kpi-value" id="goalProgress">0%</div>
                        <div class="kpi-label">Goal Progress</div>
                        <div class="kpi-subtext">Towards target</div>
                    </div>
                </div>
            </div>

            <!-- Chart Section -->
            <div class="chart-container">
                <div class="chart-card">
                    <h3>Emission Trends</h3>
                    <canvas id="trendChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-card">
                    <h3>Category Breakdown</h3>
                    <canvas id="categoryChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- History Section -->
    <section id="history" class="history-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Detailed History</h2>
                <div class="section-actions">
                    <button class="btn-secondary" id="refreshHistoryBtn">Refresh</button>
                    <button class="btn-primary" id="loadSummaryBtn">View Summary</button>
                </div>
            </div>

            <!-- Daily History Table -->
            <div class="history-table-container">
                <div class="history-table-card">
                    <h3>My History</h3>
                    <div class="history-table-wrapper">
                        <table class="history-table" id="dailyHistoryTable">
                            <thead>
                                <tr>
                                    <th>Category</th>
                                    <th>Total</th>
                                    <!-- Day columns will be dynamically added -->
                                </tr>
                            </thead>
                            <tbody id="dailyHistoryTableBody">
                                <tr>
                                    <td colspan="100%" class="empty-message">Loading history data...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Detailed Breakdown -->
            <div class="history-breakdown" id="historyBreakdown">
                <!-- Transport Breakdown -->
                <div class="breakdown-card" id="transportBreakdown">
                    <h3>üöó Transport Details</h3>
                    <div class="breakdown-content" id="transportBreakdownContent">
                        <p class="empty-message">No transport data available. Start logging your trips!</p>
                    </div>
                </div>

                <!-- Food Breakdown -->
                <div class="breakdown-card" id="foodBreakdown">
                    <h3>üçΩÔ∏è Food Consumption</h3>
                    <div class="breakdown-content" id="foodBreakdownContent">
                        <p class="empty-message">No food data available. Start logging your meals!</p>
                    </div>
                </div>

                <!-- Shopping Breakdown -->
                <div class="breakdown-card" id="shoppingBreakdown">
                    <h3>üõí Shopping Details</h3>
                    <div class="breakdown-content" id="shoppingBreakdownContent">
                        <p class="empty-message">No shopping data available. Start logging your purchases!</p>
                    </div>
                </div>

                <!-- Energy Breakdown -->
                <div class="breakdown-card" id="energyBreakdown">
                    <h3>‚ö° Energy Usage</h3>
                    <div class="breakdown-content" id="energyBreakdownContent">
                        <p class="empty-message">No energy data available. Start logging your usage!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Insights Section -->
    <section id="insights" class="insights-section">
        <div class="container">
            <h2 class="section-title">Insights & Recommendations</h2>
            <div class="insights-grid" id="insightsGrid">
                <!-- Insights will be dynamically generated -->
            </div>
        </div>
    </section>

    <!-- Tasks & Challenges Section -->
    <section id="goals" class="goals-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">Tasks & Challenges</h2>
                <div class="section-actions">
                    <button class="btn-primary" id="refreshTasksBtn">Load Tasks</button>
                    <button class="btn-secondary" id="setGoalBtn">Set Goal</button>
                </div>
            </div>
            
            <!-- Personalized Tasks -->
            <div class="tasks-container" id="tasksContainer">
                <div class="tasks-summary" id="tasksSummary" style="display: none;">
                    <div class="summary-card">
                        <h3>üí° Potential Savings</h3>
                        <div class="summary-value" id="totalPotentialSavings">0.00</div>
                        <div class="summary-label">kg CO‚ÇÇe</div>
                    </div>
                </div>
                <div class="tasks-grid" id="tasksGrid">
                    <p class="empty-message">Click "Get New Tasks" to see personalized challenges to reduce your carbon footprint!</p>
                </div>
            </div>

            <!-- Goal Setting (Collapsible) -->
            <div class="goal-card" id="goalCard" style="display: none;">
                <h3>Set Reduction Goal</h3>
                <div class="input-group">
                    <label for="goal-percent">Target Reduction (%)</label>
                    <input type="number" id="goal-percent" class="input-field" placeholder="20" min="1" max="100">
                </div>
                <div class="input-group">
                    <label for="goal-deadline">Deadline</label>
                    <input type="date" id="goal-deadline" class="input-field">
                </div>
                <button class="btn-primary" id="setGoalSubmitBtn">Set Goal</button>
            </div>
        </div>
    </section>

    <!-- Premium Section -->
    <!-- <section id="premium" class="premium-section">
        <div class="container">
            <h2 class="section-title">Premium Features</h2>
            <p class="section-subtitle">Unlock advanced analytics and exclusive features</p>
            
            <div class="pricing-table">
                <div class="pricing-card">
                    <div class="pricing-header">
                        <h3>Free</h3>
                        <div class="price">$0<span>/month</span></div>
                    </div>
                    <ul class="pricing-features">
                        <li>‚úì Basic calculator</li>
                        <li>‚úì Monthly dashboard</li>
                        <li>‚úì Basic insights</li>
                        <li>‚úì Goal tracking</li>
                    </ul>
                </div>
                <div class="pricing-card featured">
                    <div class="featured-badge">Popular</div>
                    <div class="pricing-header">
                        <h3>Premium</h3>
                        <div class="price">$9.99<span>/month</span></div>
                    </div>
                    <ul class="pricing-features">
                    <li>‚úì Everything in Free</li>
                        <li>‚úì Advanced analytics</li>
                        <li>‚úì PDF/CSV export</li>
                        <li>‚úì Device integrations</li>
                        <li>‚úì Priority chatbot</li>
                        <li>‚úì Personalized plans</li>
                        <li>‚úì Team tracking</li>
                    </ul>
                    <button class="btn-primary btn-large" id="subscribeBtn">Subscribe Now</button>
                </div>
            </div>
        </div>
    </section>     -->

    <!-- Profile Section -->
    <section id="profile" class="profile-section">
        <div class="container">
            <h2 class="section-title">Profile & Settings</h2>
            <div class="profile-container">
                <div class="profile-card">
                    <h3>User Information</h3>
                    <div class="input-group">
                        <label for="household-size">Household Size</label>
                        <input type="number" id="household-size" class="input-field" placeholder="1" min="1">
                    </div>
                    <div class="input-group">
                        <label for="location">Location</label>
                        <input type="text" id="location" class="input-field" placeholder="City, Country">
                    </div>
                    <div class="input-group">
                        <label for="units">Units</label>
                        <select id="units" class="input-field">
                            <option value="imperial">Imperial</option>
                            <option value="metric">Metric</option>
                        </select>
                    </div>
                    <button class="btn-primary" id="saveProfileBtn">Save Settings</button>
                </div>
                <!-- <div class="profile-card">
                    <h3>Subscription</h3>
                    <div id="subscriptionStatus" class="subscription-status">
                        <p>Current Plan: <span id="currentPlan">Free</span></p>
                    </div>
                    <button class="btn-secondary" id="manageSubscriptionBtn">Manage Subscription</button>
                </div> -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>Carbon Tracker</h4>
                    <p>Helping you reduce your environmental impact, one step at a time.</p>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <ul>
                        <li><a href="#calculator">Calculator</a></li>
                        <li><a href="#insights">Insights</a></li>
                        <!-- <li><a href="#premium">Premium</a></li> -->
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="#privacy">Privacy Policy</a></li>
                        <li><a href="#terms">Terms of Service</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Carbon Footprint Tracker. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Floating Chat Modal -->
    <div id="floatingChatModal" class="floating-chat-modal" style="display: none;">
        <div class="floating-chat-container">
            <div class="floating-chat-header">
                <h3>üí¨ Chat Assistant</h3>
                <button class="floating-chat-close" id="floatingChatClose" aria-label="Close chat">√ó</button>
            </div>
            <div class="floating-chat-content">
                <iframe 
                    id="floatingChatIframe" 
                    src="http://10.109.248.19:8501" 
                    frameborder="0" 
                    allow="microphone; camera"
                    title="Chat Assistant">
                </iframe>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Login</h2>
                <button class="modal-close" id="loginModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="loginForm">
                    <div class="input-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" class="input-field" placeholder="your@email.com" required>
                    </div>
                    <div class="input-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" class="input-field" placeholder="Enter your password" required>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary btn-large" style="width: 100%;">Login</button>
                        <p style="text-align: center; margin-top: 1rem; color: var(--text-secondary);">
                            Don't have an account? <a href="#" id="switchToSignup" style="color: var(--accent-primary); cursor: pointer;">Sign Up</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div id="signupModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Sign Up</h2>
                <button class="modal-close" id="signupModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="signupForm">
                    <div class="input-group">
                        <label for="signupName">Name</label>
                        <input type="text" id="signupName" class="input-field" placeholder="Your name" required>
                    </div>
                    <div class="input-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" class="input-field" placeholder="your@email.com" required>
                    </div>
                    <div class="input-group">
                        <label for="signupPassword">Password</label>
                        <input type="password" id="signupPassword" class="input-field" placeholder="Create a password" required minlength="6">
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="btn-primary btn-large" style="width: 100%;">Sign Up</button>
                        <p style="text-align: center; margin-top: 1rem; color: var(--text-secondary);">
                            Already have an account? <a href="#" id="switchToLogin" style="color: var(--accent-primary); cursor: pointer;">Login</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Chatbot Container (will be initialized by chatbot.js) -->
    <div id="chatbotContainer"></div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="api.js"></script>
    <script src="app.js"></script>
    <script src="chatbot.js"></script>
</body>
</html>
